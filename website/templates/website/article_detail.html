{% extends 'base.html' %}
{% load website_extras %}
{% load custom_tags %}


{% block title %}
    <title>{{ article.title|capfirst }} | Kelvin Projects</title>
{% endblock %}

{% block seo %}
    {% include 'components/post-seo.html' with post=article %}
{% endblock %}

{% block content %}
    <div class="min-h-[calc(100vh-388px)] flex flex-col">
        <div class="dark:bg-[#1c1c1e] flex-1">
            <div class="wrapper">
                <div class="container mx-auto hidden lg:grid grid-cols-12 gap-x-10 py-5 lg:py-8">
                    <div class="col-span-9">
                        <div class="border-b dark:border-stone-500/10 pb-5">
                            <div class="flex">
                                <p class="text-lg text-stone-500 dark:text-stone-400 hover:text-bitterSweet dark:hover:text-bitterSweet pb-2 font-bold uppercase">
                                    <a href="{{ article.article_series.get_absolute_url }}">{{ article.article_series.title|headline }}</a>
                                </p>
                            </div>
                            {#                            <h1 class="text-prussianBlue dark:text-slate-200 text-4xl lg:text-5xl font-pro font-bold">#}
                            <h1 class="text-4xl lg:text-5xl text-prussianBlue dark:text-color-light font-bold">
                                {{ article.title|headline }}
                            </h1>
                            <p class="text-lg font-medium py-5">{{ article.summary|capfirst }}</p>
                            <div class="flex-col gap-4 items-end">
                                <p class="font-bold text-link pb-1">kelvin Ude</p>
                                <div class="flex gap-4">
                                    <time class="text-sm font-bold">{{ article.published_date|date }}</time>
                                    <time class="italic text-sm text-stone-500 dark:text-stone-600">
                                        updated: {{ article.updated_date|date }}</time>
                                </div>
                            </div>
                        </div>

                        {% if not article.no_image %}
                            <div class="py-6">
                                <img src="{{ article.image.url }}" alt="Article image"
                                     class="aspect-auto w-full max-h-[500px] rounded-sm saturate-150">
                            </div>
                        {% endif %}
                        <div class="
                                    prose text-color-dark dark:text-color-light dark:prose-invert
                                    max-w-none my-6 prose-code:!bg-transparent
                                    dark:prose-code:!bg-transparent prose-h2:mb-2 
                                    prose-h3:mb-2 prose-h4:mb-1 prose-h5:mb-1 prose-h6:mb-1">
                            {{ article.content|safe }}
                        </div>
                    </div>
{#                    <aside class="col-span-3 h-screen sticky top-[140px]">#}
                    <aside class="col-span-3">
                        <div class="md:mt-[40px] border-l dark:border-stone-500/50 pl-4">
{#                        <div class="fixed border-l dark:border-stone-500/50 pl-4">#}
                            <div class="text-lg font-bold">CONTENTS</div>
                            <div class="grid gap-2 mt-1.5 pl-2">
                                {% for tag, val in article.get_toc %}
                                    <p class=" {{ tag|toc }} text-sm border-l-0 -my-0.5 hover:border-l-2 text-stone-500 dark:text-stone-400 hover:text-bitterSweet dark:hover:text-bitterSweet">{{ val }}</p>
                                {% endfor %}
                            </div>
                        </div>
                    </aside>
                </div>

                {# Mobibile #}
                <div class="container mx-auto py-4">
                    <div class="flex flex-col lg:hidden">
                        <div class="border-b dark:border-stone-500/10 pb-5">
                            <div class="flex">
                                <p class="text-lg text-stone-500 dark:text-stone-400 hover:text-bitterSweet dark:hover:text-bitterSweet pb-2 font-bold uppercase">
                                    <a href="{{ article.article_series.get_absolute_url }}">{{ article.article_series.title|capfirst }}</a>
                                </p>
                            </div>
                            <h1 class="text-prussianBlue dark:text-color-light text-4xl font-bold">
                                {{ article.title|headline }}
                            </h1>
                            <p class="text-lg font-medium py-5">{{ article.summary|capfirst }}</p>
                            <div class="flex-col gap-4 items-end">
                                <p class="font-bold text-link pb-1">kelvin Ude</p>
                                <div class="flex gap-4">
                                    <time class="text-sm font-bold">{{ article.published_date|date }}</time>
                                    <time class="italic text-sm text-stone-500 dark:text-stone-600">
                                        updated: {{ article.updated_date|date }}</time>
                                </div>
                            </div>
                        </div>
                        {% if not article.no_image %}
                            <div class="py-6">
                                <img src="{{ article.image.url }}" alt="Article image"
                                     class="aspect-auto w-full max-h-[500px] rounded-sm">
                            </div>
                        {% endif %}

                        <details class="mt-4 bg-tertiary dark:bg-slate-900/30 ring-1 ring-black/5 dark:ring-white/10 open:shadow-md p-2 open:p-4 rounded-lg">
                            <summary class="focus:outline-none text-sm leading-6 text-slate-900 dark:text-white font-semibold select-none">CONTENTS</summary>
                            <div class="grid gap-2 mt-1.5 pl-2">
                                {% for tag, val in article.get_toc %}
                                    <p class=" {{ tag|toc }} text-sm border-l-0 -my-0.5 hover:border-l-2 text-stone-500 dark:text-stone-400 hover:text-bitterSweet dark:hover:text-bitterSweet">{{ val }}</p>
                                {% endfor %}
                            </div>
                        </details>

                        <div class="py-5">
                            <div class="prose prose-lg text-color-dark dark:text-color-light dark:prose-invert
                                        max-w-none prose-code:!bg-transparent
                                        dark:prose-code:!bg-transparent prose-h2:mb-2 prose-h3:mb-2 prose-h4:mb-1 prose-h5:mb-1 prose-h6:mb-1">
                                {{ article.content|safe }}
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="min-h-[400px] bg-tertiary/60 dark:bg-transparent">
            <div class="wrapper">
                <div class="container mx-auto py-10">
                    <div class="pb-16">
                        <div class="py-2 text-stone-800 dark:text-stone-300 text-2xl lg:text-3xl font-bold">
                            Recommended
                        </div>
                        <p class="max-w-md text-lg">List of similar articles you might like, to read next, if you're
                            interested.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {% for rocommend in recommended %}
                            {% include 'website/article/article-recommend-card.html' with data=rocommend %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}